@page "/FileManager"
@using Microsoft.Extensions.Configuration
@using Microsoft.Extensions.Logging
@using Syncfusion.Blazor.FileManager
@using Syncfusion.Blazor.Buttons
@using Syncfusion.Blazor.ImageEditor
@using Syncfusion.Blazor.Popups
@inject NavigationManager NavigationManager
@inject HttpClient HttpClient
@inject IConfiguration Configuration
@inject ILogger<FileManager> Logger
@using Syncfusion.Blazor.Spinner


<SfFileManager @ref="SfFileManager" TValue="FileManagerDirectoryContent" Height="90vh"
    SelectedItemsChanged="OnSelectedItemsChanged">

    <SfSpinner @bind-Visible="ShowSpinner"></SfSpinner>
    <FileManagerAjaxSettings Url="/api/FileProvider/AmazonS3FileOperations" UploadUrl="/api/FileProvider/AmazonS3Upload"
        GetImageUrl="/api/FileProvider/AmazonS3GetImage" DownloadUrl="/api/FileProvider/AmazonS3Download">
    </FileManagerAjaxSettings>
    <FileManagerToolbarSettings ToolbarItems="@Items">
        <FileManagerCustomToolbarItems>
            <FileManagerCustomToolbarItem Name="AIImage">
                <Template>
                    <SfButton CssClass="e-tbar-btn-text e-tbar-ddb-text " Content="AI" OnClick="GetAISegmentedImage"
                        Disabled="@IsAIImageBtnDisabled"></SfButton>
                </Template>
            </FileManagerCustomToolbarItem>
            <FileManagerCustomToolbarItem Name="MeasurementImage">
                <Template>
                    <SfButton CssClass="e-tbar-btn-text e-tbar-ddb-text " Content="Measure"
                        OnClick="GetAIMeasurementImage" Disabled="@IsAIMeasurementBtnDisabled"></SfButton>
                </Template>
            </FileManagerCustomToolbarItem>
            @* ExaminationRecord *@
            @* <FileManagerCustomToolbarItem Name="ExaminationRecord">
                <Template>
                    <SfButton CssClass="e-tbar-btn-text e-tbar-ddb-text " Content="Examination Record"
                        OnClick="GenerateRecord" Disabled="@IsExaminationRecordDisabled"></SfButton>

                </Template>
            </FileManagerCustomToolbarItem> *@
        </FileManagerCustomToolbarItems>
    </FileManagerToolbarSettings>
    <FileManagerEvents TValue="FileManagerDirectoryContent" OnFileOpen="OpenFilePreview"></FileManagerEvents>
    <FileManagerEvents TValue="FileManagerDirectoryContent" BeforePopupOpen="SuppressImagePreview"></FileManagerEvents>    
</SfFileManager>
@* <div class="posAbsolute"> *@
@* </div> *@
@* </div> *@

<style>
    .posRelative {
        position: relative;
    }

    .posAbsolute {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
    }

    div.e-large-icons li.e-large-icon {
        width: 170px !important;
        height: 130px !important;
    }

    div.e-large-icons div.e-text-content {
        height: 125px !important;
    }

    div.e-large-icons div.e-list-icon,
    div.e-large-icons img.e-list-img {
        width: 160px;
        height: 100px;
        max-width: unset !important;
        max-height: unset !important;
    }

    div.e-large-icons span.e-list-text {
        width: 160px !important;
    }
</style>